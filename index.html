<!DOCTYPE html>
<html>
<head>
    <style>
        #password {
            font-family: monospace;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div id="password"></div>

    <script>
        function generatePassword() {
            // Set up initial variables.
            var password = [];
            var allowedChars = "";
            var output = document.getElementById("password");

            // Prompt the user for options.
            var passwordLength = parseInt(prompt("How many characters? (8-128)",8));
            if (!(passwordLength >= 8 && passwordLength <= 128)) {
                alert("Please enter a number from 8 to 128.");
                return;
            }
            if (confirm("Lowercase?")) {
                var lowerCase = "abcdefghijklmnopqrstuvwxyz";
                allowedChars += lowerCase;
            }
            if (confirm("Uppercase?")) {
                var upperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                allowedChars += upperCase;
            }
            if (confirm("Numbers?")) {
                var numbers = "1234567890";
                allowedChars += numbers;
            }
            if (confirm("Special Characters?")) {
                var symbols = "!#$%&*+-=?@^_|<>(){}[]:;,.";
                allowedChars += symbols;
            }

            // Check if any character types are selected.
            if (allowedChars) {
                for (var i = 0; i < passwordLength; i++) {
                    // Include at least one of each selected character types then generate the rest of the characters at random. Each character is spliced into the password array at a random position.
                    if (i === 0) {
                        if (lowerCase) {
                            password.splice(Math.floor(Math.random()*password.length),0,lowerCase[Math.floor(Math.random()*lowerCase.length)])
                            i++;
                        }
                        if (upperCase) {
                            password.splice(Math.floor(Math.random()*password.length),0,upperCase[Math.floor(Math.random()*upperCase.length)])
                            i++;
                        }
                        if (numbers) {
                            password.splice(Math.floor(Math.random()*password.length),0,numbers[Math.floor(Math.random()*numbers.length)])
                            i++;
                        }
                        if (symbols) {
                            password.splice(Math.floor(Math.random()*password.length),0,symbols[Math.floor(Math.random()*symbols.length)])
                            i++;
                        }
                    }
                    password.splice(Math.floor(Math.random()*password.length),0,allowedChars[Math.floor(Math.random()*allowedChars.length)]);
                }
                // Output the password array as a combined string.
                output.innerText = password.join("");
            } else {
                alert("Password was not generated.\nPlease confirm at least one character type.");
            }
            console.log(password);
        }
        generatePassword();
    </script>
</body>
</html>